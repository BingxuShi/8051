C51 COMPILER V9.60.7.0   MAIN                                                              05/28/2023 20:59:29 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_C51\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\mai
                    -n.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include<reg52.h>
   2          
   3          #define uchar unsigned char
   4          #define uint unsigned int
   5          
   6          uchar code Tab0[]=    //å®šä¹‰æ•°ç ç®¡æ•°ç»„ï¼Œæ²¡æœ‰å°æ•°ç‚¹
   7          {
   8            0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f
   9          };
  10          uchar code Tab1[]=    //å®šä¹‰æ•°ç ç®¡æ•°ç»„ï¼Œæœ‰å°æ•°ç‚¹
  11          { 
  12            0xbf,0x86,0xdb,0xcf,0xe6,0xed,0xfd,0x87,0xff,0xef
  13          };
  14          
  15          sbit K1=P3^2;     //
  16          sbit K2=P3^3;     //
  17          sbit K3=P3^4;     //
  18          
  19          
  20          void Display1();    //ç§’è¡¨æ˜¾ç¤ºå‡½æ•°
  21          void Init();      //ä¸­æ–­åˆå§‹åŒ–å‡½æ•°
  22          void KEY_MiaoBiao();  //æ£€æµ‹ç§’è¡¨æ“ä½œæŒ‰é”®
  23          void KEY_Time_Set();  //æ£€æµ‹æ—¶é—´è®¾ç½®æŒ‰é”®
  24          void delay_ms(unsigned int ms);
  25          
  26          
  27          typedef struct
  28          {
  29            uchar Miao_Biao0;
  30            uchar Miao_Biao1;
  31            uchar Miao_Biao2;
  32            uchar Miao_Biao3;
  33            uchar Miao_Biao4;
  34          
  35          }MIAOBIAO;
  36          
  37          MIAOBIAO MiaoBiao;
  38          void main()
  39          {
  40   1        Init();                   //ä¸­æ–­åˆå§‹åŒ–
  41   1        while(1)                  //æ­»å¾ªç¯
  42   1          {
  43   2            
  44   2            Display1();     //æ˜¾ç¤ºç§’è¡¨
  45   2            KEY_MiaoBiao();   //æ‰«æç§’è¡¨æ“ä½œ
  46   2                    
  47   2          }
  48   1      }
  49          
  50          void KEY_MiaoBiao()               //æ£€æµ‹ç§’è¡¨æŒ‰é”®æ“ä½œ
  51          {
  52   1        
  53   1        if(K2==0)
  54   1        {
C51 COMPILER V9.60.7.0   MAIN                                                              05/28/2023 20:59:29 PAGE 2   

  55   2          delay_ms(10);
  56   2          if(K2==0)
  57   2          {
  58   3            TR0=~TR0;     //K2æ¯æŒ‰ä¸€æ¬¡TR1å–åï¼Œæš‚åœæˆ–å¼€å§‹å®šæ—¶å™¨1ï¼Œè¾¾åˆ°æš‚åœæˆ–å¼€å§‹ç§’è¡¨çš„ç›®çš
             -„
  59   3            while(!K2);
  60   3          }
  61   2        }
  62   1        if(K3==0)
  63   1        {
  64   2          delay_ms(10);
  65   2          if(K3==0)         //å½“K3æŒ‰ä¸‹æ—¶ç§’è¡¨æ‰€æœ‰æ•°æ®æ¸…é›¶ï¼Œå¹¶åœæ­¢å®šæ—¶å™¨1
  66   2          {
  67   3            if(TR0 == 0)  //åªæœ‰åœ¨è·‘ç§’åœæ­¢æ—¶æ‰å¯ä»¥æ¸…é›¶
  68   3            {
  69   4              TR0=0;        //åœæ­¢å®šæ—¶å™¨1
  70   4              MiaoBiao.Miao_Biao0=0;    //æ¸…é›¶æ•°æ®
  71   4              MiaoBiao.Miao_Biao1=0;
  72   4              MiaoBiao.Miao_Biao2=0;
  73   4              MiaoBiao.Miao_Biao3=0;
  74   4              MiaoBiao.Miao_Biao4=0;
  75   4              while(!K3);
  76   4            }
  77   3          }
  78   2        }
  79   1        if(K1==0)
  80   1        {
  81   2          delay_ms(10);
  82   2          if(K1==0)
  83   2          {
  84   3            if(TR1 == 0)    //åœæ­¢è·‘ç§’æ—¶ç¿»çœ‹è®¡æ¬¡è®°å½•
  85   3            {
  86   4                      
  87   4            }
  88   3            else            //è·‘ç§’æ—¶è®¡æ¬¡
  89   3            {
  90   4                    
  91   4            }
  92   3          }
  93   2                  
  94   2        }
  95   1          
  96   1      }
  97          
  98          
  99            
 100          
 101          void Time1() interrupt 1        //å®šæ—¶å™¨1å‡½æ•°
 102          {
 103   1        TH0 = 0xFC;  // è®¾ç½®å®šæ—¶å™¨åˆå€¼
 104   1        TL0 = 0x18;
 105   1      
 106   1        MiaoBiao.Miao_Biao0++;
 107   1        if(MiaoBiao.Miao_Biao0==100)        //ä»¥ä¸‹ä¸ºç§’è¡¨æ•°æ®å¤„ç†
 108   1          {
 109   2            MiaoBiao.Miao_Biao0=0;
 110   2            MiaoBiao.Miao_Biao1++;      //Miao_Biao1æ¯åŠ 1æ¬¡ä¸º100msï¼Œ
 111   2            if(MiaoBiao.Miao_Biao1==10)
 112   2              {
 113   3                MiaoBiao.Miao_Biao1=0;
 114   3                MiaoBiao.Miao_Biao2++;
 115   3                if(MiaoBiao.Miao_Biao2==60) 
C51 COMPILER V9.60.7.0   MAIN                                                              05/28/2023 20:59:29 PAGE 3   

 116   3                  {
 117   4                    MiaoBiao.Miao_Biao2=0;
 118   4                    MiaoBiao.Miao_Biao3++;
 119   4                    if(MiaoBiao.Miao_Biao3==60)
 120   4                      {
 121   5                        MiaoBiao.Miao_Biao3=0;
 122   5                        MiaoBiao.Miao_Biao4++;
 123   5                        if(MiaoBiao.Miao_Biao4==10)
 124   5                          MiaoBiao.Miao_Biao4=0;
 125   5                      }
 126   4                  }
 127   3              }
 128   2          }
 129   1      }
 130          
 131          void Init()             //ä¸­æ–­åˆå§‹åŒ–å‡½æ•°
 132          {
 133   1        TMOD |= 0x01;   // å®šæ—¶å™¨0å·¥ä½œåœ¨æ¨¡å¼1ï¼š16ä½è‡ªåŠ¨é‡è½½è®¡æ•°æ¨¡å¼
 134   1        TH0 = 0xFC;     // è®¾ç½®å®šæ—¶å™¨åˆå€¼ï¼Œè®¡ç®—å…¬å¼ï¼š65535-4500+1=0xFC18
 135   1        TL0 = 0x18;     // æ—¶é’Ÿå‘¨æœŸä¸º1/11.0592MHz â‰ˆ 90.5nsï¼Œè®¡æ—¶4500ä¸ªæ—¶é’Ÿå‘¨æœŸç­‰äº1ms
 136   1        ET0 = 1;        // å¼€å¯å®šæ—¶å™¨0ä¸­æ–­
 137   1        TR0 = 0;        // å¯åŠ¨å®šæ—¶å™¨0
 138   1        EA = 1;         // å¼€å¯æ€»ä¸­æ–­
 139   1      }
 140          
 141          
 142          void Display1()     //æ˜¾ç¤ºç§’è¡¨
 143          {
 144   1        P0=Tab0[MiaoBiao.Miao_Biao1%10];    //æ˜¾ç¤º1/10ç§’çš„ä¸ªä½
 145   1        P1=0xdf;          //æ®µé€‰
 146   1        delay_ms(1);          //å»¶æ—¶
 147   1        P0=0X00;          //æ¶ˆéš
 148   1      
 149   1        P0=Tab1[MiaoBiao.Miao_Biao2%10];    //æ˜¾ç¤ºç§’çš„ä¸ªä½ï¼Œéœ€è¦åŠ ä¸Šå°æ•°ç‚¹åšåˆ†éš”ç¬¦
 150   1        P1=0xef;          //æ®µé€‰
 151   1        delay_ms(1);          //å»¶æ—¶
 152   1        P0=0X00;          //æ¶ˆéš
 153   1      
 154   1        P0=Tab0[MiaoBiao.Miao_Biao2/10];    //æ˜¾ç¤ºç§’çš„åä½
 155   1        P1=0xf7;          //æ®µé€‰
 156   1        delay_ms(1);          //å»¶æ—¶
 157   1        P0=0X00;          //æ¶ˆéš
 158   1      
 159   1        P0=Tab1[MiaoBiao.Miao_Biao3%10];    //æ˜¾ç¤ºåˆ†çš„ä¸ªä½ï¼Œéœ€è¦åŠ ä¸Šå°æ•°ç‚¹åšåˆ†éš”ç¬¦
 160   1        P1=0xfb;          //æ®µé€‰
 161   1        delay_ms(1);          //å»¶æ—¶
 162   1        P0=0X00;          //æ¶ˆéš
 163   1      
 164   1        P0=Tab0[MiaoBiao.Miao_Biao3/10];    //æ˜¾ç¤ºåˆ†çš„åä½
 165   1        P1=0xfd;          //æ®µé€‰
 166   1        delay_ms(1);          //å»¶æ—¶
 167   1        P0=0X00;          //æ¶ˆéš
 168   1      
 169   1        P0=Tab1[MiaoBiao.Miao_Biao4%10];    //æ˜¾ç¤ºæ—¶çš„ä¸ªä½ï¼Œéœ€è¦åŠ ä¸Šå°æ•°ç‚¹åšåˆ†éš”ç¬¦
 170   1        P1=0xfe;          //æ®µé€‰
 171   1        delay_ms(1);          //å»¶æ—¶
 172   1        P0=0X00;          //æ¶ˆéš
 173   1      }
 174          
 175          
 176          void delay_ms(unsigned int ms)  // å»¶æ—¶å‡½æ•°
 177          {
C51 COMPILER V9.60.7.0   MAIN                                                              05/28/2023 20:59:29 PAGE 4   

 178   1        unsigned char i, j;
 179   1        while (ms--)
 180   1        {
 181   2          for (i = 0; i < 12; i++)
 182   2          {
 183   3            for (j = 0; j < 250; j++);
 184   3           }
 185   2        }
 186   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    320    ----
   CONSTANT SIZE    =     20    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
