C51 COMPILER V9.60.7.0   MAIN                                                              05/12/2023 18:04:16 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_C51\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\mai
                    -n.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include<reg52.h>
   2          
   3          #define uchar unsigned char
   4          #define uint unsigned int
   5          
   6          uchar code Tab0[]=    //å®šä¹‰æ•°ç ç®¡æ•°ç»„ï¼Œæ²¡æœ‰å°æ•°ç‚¹
   7          {
   8            0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f
   9          };
  10          uchar code Tab1[]=    //å®šä¹‰æ•°ç ç®¡æ•°ç»„ï¼Œæœ‰å°æ•°ç‚¹
  11          { 
  12            0xbf,0x86,0xdb,0xcf,0xe6,0xed,0xfd,0x87,0xff,0xef
  13          };
  14          
  15          sbit K1=P3^2;     //
  16          sbit K2=P3^3;     //
  17          sbit K3=P3^4;     //
  18          
  19          void Delay(uchar x);  //å»¶æ—¶å‡½æ•°
  20          void Display1();    //ç§’è¡¨æ˜¾ç¤ºå‡½æ•°
  21          void Init();      //ä¸­æ–­åˆå§‹åŒ–å‡½æ•°
  22          void KEY_MiaoBiao();  //æ£€æµ‹ç§’è¡¨æ“ä½œæŒ‰é”®
  23          void KEY_Time_Set();  //æ£€æµ‹æ—¶é—´è®¾ç½®æŒ‰é”®
  24          
  25          typedef struct
  26          {
  27            uchar Miao_Biao0;
  28            uchar Miao_Biao1;
  29            uchar Miao_Biao2;
  30            uchar Miao_Biao3;
  31            uchar Miao_Biao4;
  32          
  33          }MIAOBIAO;
  34          
  35          MIAOBIAO MiaoBiao;
  36          void main()
  37          {
  38   1        Init();                   //ä¸­æ–­åˆå§‹åŒ–
  39   1        while(1)                  //æ­»å¾ªçŽ¯
  40   1          {
  41   2            
  42   2            Display1();     //æ˜¾ç¤ºç§’è¡¨
  43   2            KEY_MiaoBiao();   //æ‰«æç§’è¡¨æ“ä½œ
  44   2                    
  45   2          }
  46   1      }
  47          
  48          void KEY_MiaoBiao()               //æ£€æµ‹ç§’è¡¨æŒ‰é”®æ“ä½œ
  49          {
  50   1        
  51   1            if(K2==0)
  52   1              {
  53   2                Delay(10);
  54   2                if(K2==0)
C51 COMPILER V9.60.7.0   MAIN                                                              05/12/2023 18:04:16 PAGE 2   

  55   2                  {
  56   3                    TR1=~TR1;     //K2æ¯æŒ‰ä¸€æ¬¡TR1å–åï¼Œæš‚åœæˆ–å¼€å§‹å®šæ—¶å™¨1ï¼Œè¾¾åˆ°æš‚åœæˆ–å¼€å§‹ç§’è¡¨çš„ç
             -›®çš„
  57   3                    while(!K2);
  58   3                  }
  59   2              }
  60   1            if(K3==0)
  61   1              {
  62   2                Delay(10);
  63   2                if(K3==0)         //å½“K3æŒ‰ä¸‹æ—¶ç§’è¡¨æ‰€æœ‰æ•°æ®æ¸…é›¶ï¼Œå¹¶åœæ­¢å®šæ—¶å™¨1
  64   2                  {
  65   3                    if(TR1 == 0)  //åªæœ‰åœ¨è·‘ç§’åœæ­¢æ—¶æ‰å¯ä»¥æ¸…é›¶
  66   3                    {
  67   4                      TR1=0;        //åœæ­¢å®šæ—¶å™¨1
  68   4                      MiaoBiao.Miao_Biao0=0;    //æ¸…é›¶æ•°æ®
  69   4                      MiaoBiao.Miao_Biao1=0;
  70   4                      MiaoBiao.Miao_Biao2=0;
  71   4                      MiaoBiao.Miao_Biao3=0;
  72   4                      MiaoBiao.Miao_Biao4=0;
  73   4                      while(!K3);
  74   4                    }
  75   3                  }
  76   2              }
  77   1              if(K1==0)
  78   1              {
  79   2                Delay(10);
  80   2                if(K1==0)
  81   2                  {
  82   3                    if(TR1 == 0)    //åœæ­¢è·‘ç§’æ—¶ç¿»çœ‹è®¡æ¬¡è®°å½•
  83   3                    {
  84   4                      
  85   4                    }
  86   3                    else            //è·‘ç§’æ—¶è®¡æ¬¡
  87   3                    {
  88   4                    
  89   4                    }
  90   3                  }
  91   2                  
  92   2              }
  93   1          
  94   1      }
  95          
  96          
  97            
  98          
  99          void Time1() interrupt 3        //å®šæ—¶å™¨1å‡½æ•°
 100          {
 101   1        TH1=(65536-50000)/256;      //é‡è£…åˆå€¼
 102   1        TL1=(65536-50000)%256;
 103   1      
 104   1        MiaoBiao.Miao_Biao0++;
 105   1        if(MiaoBiao.Miao_Biao0==2)        //ä»¥ä¸‹ä¸ºç§’è¡¨æ•°æ®å¤„ç†
 106   1          {
 107   2            MiaoBiao.Miao_Biao0=0;
 108   2            MiaoBiao.Miao_Biao1++;      //Miao_Biao1æ¯åŠ 1æ¬¡ä¸º100msï¼Œ
 109   2            if(MiaoBiao.Miao_Biao1==10)
 110   2              {
 111   3                MiaoBiao.Miao_Biao1=0;
 112   3                MiaoBiao.Miao_Biao2++;
 113   3                if(MiaoBiao.Miao_Biao2==60) 
 114   3                  {
 115   4                    MiaoBiao.Miao_Biao2=0;
C51 COMPILER V9.60.7.0   MAIN                                                              05/12/2023 18:04:16 PAGE 3   

 116   4                    MiaoBiao.Miao_Biao3++;
 117   4                    if(MiaoBiao.Miao_Biao3==60)
 118   4                      {
 119   5                        MiaoBiao.Miao_Biao3=0;
 120   5                        MiaoBiao.Miao_Biao4++;
 121   5                        if(MiaoBiao.Miao_Biao4==10)
 122   5                          MiaoBiao.Miao_Biao4=0;
 123   5                      }
 124   4                  }
 125   3              }
 126   2          }
 127   1      }
 128          
 129          void Init()             //ä¸­æ–­åˆå§‹åŒ–å‡½æ•°
 130          {
 131   1        EA=1;             //å¼€æ€»ä¸­æ–­
 132   1        TMOD=0X11;              //å®šæ—¶å™¨å·¥ä½œæ–¹å¼é€‰æ‹©ï¼Œå®šæ—¶å™¨1é€‰æ‹©ç¬¬1ç§å·¥ä½œæ–¹å¼
 133   1        
 134   1        TH1=(65536-50000)/256;      //å®šæ—¶å™¨1è£…åˆå€¼ï¼Œå®šæ—¶50ms
 135   1        TL1=(65536-50000)%256;
 136   1        ET1=1;                //å¼€å®šæ—¶å™¨1å¼€å…³
 137   1        TR1=0;              //å…³å®šæ—¶å™¨1å°å¼€å…³
 138   1      }
 139          
 140          
 141          void Display1()     //æ˜¾ç¤ºç§’è¡¨
 142          {
 143   1        P0=Tab0[MiaoBiao.Miao_Biao1%10];    //æ˜¾ç¤º1/10ç§’çš„ä¸ªä½
 144   1        P1=0xdf;          //æ®µé€‰
 145   1        Delay(10);          //å»¶æ—¶
 146   1        P0=0X00;          //æ¶ˆéš
 147   1      
 148   1        P0=Tab1[MiaoBiao.Miao_Biao2%10];    //æ˜¾ç¤ºç§’çš„ä¸ªä½ï¼Œéœ€è¦åŠ ä¸Šå°æ•°ç‚¹åšåˆ†éš”ç¬¦
 149   1        P1=0xef;          //æ®µé€‰
 150   1        Delay(10);          //å»¶æ—¶
 151   1        P0=0X00;          //æ¶ˆéš
 152   1      
 153   1        P0=Tab0[MiaoBiao.Miao_Biao2/10];    //æ˜¾ç¤ºç§’çš„åä½
 154   1        P1=0xf7;          //æ®µé€‰
 155   1        Delay(10);          //å»¶æ—¶
 156   1        P0=0X00;          //æ¶ˆéš
 157   1      
 158   1        P0=Tab1[MiaoBiao.Miao_Biao3%10];    //æ˜¾ç¤ºåˆ†çš„ä¸ªä½ï¼Œéœ€è¦åŠ ä¸Šå°æ•°ç‚¹åšåˆ†éš”ç¬¦
 159   1        P1=0xfb;          //æ®µé€‰
 160   1        Delay(10);          //å»¶æ—¶
 161   1        P0=0X00;          //æ¶ˆéš
 162   1      
 163   1        P0=Tab0[MiaoBiao.Miao_Biao3/10];    //æ˜¾ç¤ºåˆ†çš„åä½
 164   1        P1=0xfd;          //æ®µé€‰
 165   1        Delay(10);          //å»¶æ—¶
 166   1        P0=0X00;          //æ¶ˆéš
 167   1      
 168   1        P0=Tab1[MiaoBiao.Miao_Biao4%10];    //æ˜¾ç¤ºæ—¶çš„ä¸ªä½ï¼Œéœ€è¦åŠ ä¸Šå°æ•°ç‚¹åšåˆ†éš”ç¬¦
 169   1        P1=0xfe;          //æ®µé€‰
 170   1        Delay(10);          //å»¶æ—¶
 171   1        P0=0X00;          //æ¶ˆéš
 172   1      }
 173          
 174          void Delay(uchar x)         //å»¶æ—¶
 175          {
 176   1        uchar i,j;
 177   1        for(i=x;i>0;i--)
C51 COMPILER V9.60.7.0   MAIN                                                              05/12/2023 18:04:16 PAGE 4   

 178   1          for(j=110;j>0;j--);
 179   1      }
 180          
 181          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    308    ----
   CONSTANT SIZE    =     20    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
